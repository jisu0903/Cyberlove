<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>♡두근두근 미소년 연애 시뮬레이터!♡</title>

<link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>

<body>

<canvas id="particles"></canvas>

<div class="overlay"></div>

<!-- ⭐ 미스테리 캐릭터 -->
<div class="character-section">
  <img src="images/Mystery1.png" class="character">
  <img src="images/mystery2.png" class="character">
  <img src="images/mystery3.png" class="character">
</div>

<!-- 타이틀 -->
<div class="title-box">
  <h1>♡두근두근 미소년 연애 시뮬레이터!♡</h1>
  <p class="subtitle">— じすちゃん의 연애 일대기 —</p>
</div>

<!-- 메뉴 -->
<div class="menu">
  <img src="images/Playicon.png" class="menu-btn" id="newGameBtn">
  <img src="images/Loadicon.png" class="menu-btn">
  <img src="images/memoryicon.png" class="menu-btn">
</div>

<!-- 🎬 인트로 -->
<div id="introContainer">

  <div class="slide">
    <img src="images/Jiji.png">
    <div class="dialogue-box">
      <div class="name-tag">석진</div>
      <div class="dialogue-text">방탄 컴백 쇼케이스 함께할래요?</div>
    </div>
  </div>

  <div class="slide">
    <img src="images/Bobo.png">
    <div class="dialogue-box">
      <div class="name-tag">보검</div>
      <div class="dialogue-text">지수야, 보검 오빠는 어때?</div>
    </div>
  </div>

  <div class="slide">
    <img src="images/Didi.png">
    <div class="dialogue-box">
      <div class="name-tag">디카프리오</div>
      <div class="dialogue-text">영화 데이트 갈까?</div>
    </div>
  </div>

</div>

<!-- 💥 중앙 Poong -->
<div id="bigPoong">
  <img src="images/Poong.png">
  <div class="poong-text">이런 남자는 싫다구!!</div>
</div>

<!-- 🎵 BGM -->
<audio id="bgm" loop>
  <source src="Music1.mp3" type="audio/mpeg">
</audio>

<script>
const introContainer = document.getElementById("introContainer");
const slides = document.querySelectorAll(".slide");
const bigPoong = document.getElementById("bigPoong");
const bgm = document.getElementById("bgm");

let currentSlide = 0;

introContainer.style.display = "none";
bigPoong.style.display = "none";

/* 🎮 NEW GAME */
document.getElementById("newGameBtn").onclick = () => {
  introContainer.style.display = "block";
  showSlide(0);
  currentSlide = 0;
  bgm.play(); // 노래 재생
};

function showSlide(i){
  slides.forEach(s => s.style.display = "none");
  slides[i].style.display = "block";
}

introContainer.onclick = () => {
  currentSlide++;

  if(currentSlide < slides.length){
    showSlide(currentSlide);
  }
  else if(currentSlide === slides.length){
    bigPoong.style.display = "block";
  }
  else{
    bigPoong.style.display = "none";
    introContainer.style.display = "none";
    currentSlide = 0;
  }
};

/* ✨ 파티클 */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];

for (let i = 0; i < 80; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 2,
    d: Math.random() * 1
  });
}

function drawParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="rgba(255,182,255,0.7)";
  ctx.beginPath();

  particles.forEach(p=>{
    ctx.moveTo(p.x,p.y);
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2,true);
  });

  ctx.fill();

  particles.forEach(p=>{
    p.y+=p.d;
    if(p.y>canvas.height){
      p.y=0;
      p.x=Math.random()*canvas.width;
    }
  });
}

setInterval(drawParticles,33);
</script>

</body>
</html>
